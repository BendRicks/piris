<!DOCTYPE html>
<html lang="en"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Users</title>
    <link rel="stylesheet" type="text/css" th:href="@{/css/style.css}">
    <script th:inline="javascript">
        var _csrfToken = [[${_csrf.token}]]
    </script>
</head>
<body class="main main-dop">
<div class="modal-container" id="modal" style="display: none">
    <div class="modal-background" id="modal-bg"></div>
    <div class="modal-window">
        <div class="modal-window-header">

            <div class="admin-navigation-bar">
                <div class="tablinks active" onclick="openTab(event, 'adminPersonal')">
                    <p>Данные пользователя</p>
                </div>
                <div class="tablinks" onclick="openTab(event, 'adminAccounts')">
                    <p>Счета</p>
                </div>
                <div class="tablinks" onclick="openTab(event, 'adminObligations')">
                    <p>Договоры</p>
                </div>
            </div>

            <svg class="modal-window-header-cross" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000"
                 height="20px" width="20px" version="1.1" id="modal-header-cross" viewBox="0 0 490 490"
                 xml:space="preserve">
                        <polygon
                                points="456.851,0 245,212.564 33.149,0 0.708,32.337 212.669,245.004 0.708,457.678 33.149,490 245,277.443 456.851,490   489.292,457.678 277.331,245.004 489.292,32.337 "/>
                    </svg>
        </div>
        <div class="modal-window-content" id="modal-content">
            <div id="adminPersonal" class="tabcontent" style="display: block;">

            </div>
            <div id="adminAccounts" class="tabcontent">

            </div>

            <div id="adminObligations" class="tabcontent">

            </div>
        </div>
    </div>
</div>

<div class="modal-container" id="user-modal" style="display: none">
    <div class="modal-background" id="user-modal-bg"></div>
    <div class="modal-window">
        <div class="modal-window-header">
            <p>Создать</p>
            <svg class="modal-window-header-cross" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000"
                 height="20px" width="20px" version="1.1" id="user-modal-header-cross" viewBox="0 0 490 490"
                 xml:space="preserve">
                        <polygon
                                points="456.851,0 245,212.564 33.149,0 0.708,32.337 212.669,245.004 0.708,457.678 33.149,490 245,277.443 456.851,490   489.292,457.678 277.331,245.004 489.292,32.337 "/>
                    </svg>
        </div>
        <div class="modal-window-content" id="user-modal-content">
            <form method="post" class="register-modal-form register-fix" id="create-user-form">
                <div class="model-rows">
                    <div class="register-form-colomn">
                        <input type="hidden" th:name="${_csrf.getParameterName()}" th:value="${_csrf.token}">
                        <input type="hidden" name="id" id="id">
                        <label class="input-label">
                            Email
                            <input required type="text" class="text-input" name="email" id="email" pattern=".+@.+\..+">
                        </label>
                        <label class="input-label">
                            Фамилия
                            <input required type="text" class="text-input" name="surname" id="surname" pattern="[А-Яа-я]+">
                        </label>
                        <label class="input-label">
                            Имя
                            <input required type="text" class="text-input" name="name" id="name" pattern="[А-Яа-я]+">
                        </label>
                        <label class="input-label">
                            Отчество
                            <input required type="text" class="text-input" name="givenName" id="givenName" pattern="[А-Яа-я]+">
                        </label>
                        <label class="input-label">
                            Дата рождения
                            <input required type="date" class="text-input" name="birthDate" id="birthDate">
                        </label>
                        <label class="input-label">
                            Пол
                            <select required name="sex" id="sex">
                                <option th:each="sexOpt : ${T(ru.bendricks.piris.model.Sex).values()}" th:value="${sexOpt}" th:text="${sexOpt.getRuValue()}"></option>
                            </select>
                        </label>
                        <label class="input-label">
                            Номер паспорта
                            <input required type="text" class="text-input" name="passportSerial" id="passportSerial" pattern="[A-Z]{2}\d{7}">
                        </label>
                        <label class="input-label">
                            Орган выдавший паспорт
                            <input required type="text" class="text-input" name="competentOrgan" id="competentOrgan">
                        </label>
                        <label class="input-label">
                            Дата выдачи паспорта
                            <input required type="date" class="text-input" name="dateOfIssue" id="dateOfIssue">
                        </label>
                        <label class="input-label">
                            Идентификационный номер
                            <input required type="text" class="text-input" name="passportId" id="passportId" pattern="\d{7}[A-Z]\d{3}[A-Z]{2}\d">
                        </label>
                    </div>
                    <div class="register-form-colomn">
                        <label class="input-label">
                            Место рождения
                            <input required type="text" class="text-input" name="birthLocation" id="birthLocation">
                        </label>
                        <label class="input-label">
                            Город проживания
                            <select required name="cityOfResidence" id="cityOfResidence">
                                <option th:each="cityOpt : ${T(ru.bendricks.piris.model.City).values()}" th:value="${cityOpt}" th:text="${cityOpt.getRuValue()}"></option>
                            </select>
                        </label>
                        <label class="input-label">
                            Адрес проживания
                            <input required type="text" class="text-input" name="addressOfLiving" id="addressOfLiving">
                        </label>
                        <label class="input-label">
                            Домашний телефон (+37517...)
                            <input type="text" class="text-input" name="homePhoneNumber" id="homePhoneNumber" pattern="+37517\d{7}">
                        </label>
                        <label class="input-label">
                            Мобильный телефон (+37529...)
                            <input type="text" class="text-input" name="mobilePhoneNumber" id="mobilePhoneNumber" pattern="+375\d{9}">
                        </label>
                        <label class="input-label">
                            Адрес прописки
                            <input required type="text" class="text-input" name="placeOfResidence" id="placeOfResidence">
                        </label>
                        <label class="input-label">
                            Семейное положение
                            <select required name="maritalStatus" id="maritalStatus">
                                <option th:each="martialStatusOpt : ${T(ru.bendricks.piris.model.MaritalStatus).values()}" th:value="${martialStatusOpt}" th:text="${martialStatusOpt.getRuValue()}"></option>
                            </select>
                        </label>
                        <label class="input-label">
                            Гражданство
                            <select required name="citizenship" id="citizenship">
                                <option th:each="citizenshipOpt : ${T(ru.bendricks.piris.model.Citizenship).values()}" th:value="${citizenshipOpt}" th:text="${citizenshipOpt.getRuValue()}"></option>
                            </select>
                        </label>
                        <label class="input-label">
                            Инвалидность
                            <select required name="disability" id="disability">
                                <option th:each="disabilityOpt : ${T(ru.bendricks.piris.model.Disability).values()}" th:value="${disabilityOpt}" th:text="${disabilityOpt.getRuValue()}"></option>
                            </select>
                        </label>
                        <label class="input-label">
                            Пенсионер
                            <input type="checkbox" class="text-input" name="pensioner" id="pensioner">
                        </label>
                        <label class="input-label">
                            Ежемесячный доход
                            <input type="number" class="text-input" name="monthlyIncome" id="monthlyIncome">
                        </label>
                    </div>
                </div>
                <button class="send-button" onclick="createNewUser(event)">Создать</button>
            </form>
        </div>
    </div>
</div>

<div class="modal-container" id="account-modal" style="display: none">
    <div class="modal-background-small" id="account-modal-bg"></div>
    <div class="modal-window-small">
        <div class="modal-window-header">
            <p>Создать счет</p>
            <svg class="modal-window-header-cross" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000"
                 height="20px" width="20px" version="1.1" id="account-modal-header-cross" viewBox="0 0 490 490"
                 xml:space="preserve">
                        <polygon
                                points="456.851,0 245,212.564 33.149,0 0.708,32.337 212.669,245.004 0.708,457.678 33.149,490 245,277.443 456.851,490   489.292,457.678 277.331,245.004 489.292,32.337 "/>
                    </svg>
        </div>
        <div class="modal-window-content" id="account-modal-content">
            <form method="post" class="register-modal-form register-fix" id="create-account-form">
                <div class="model-rows">
                    <div class="register-form-colomn">
                        <input type="hidden"  th:name="${_csrf.getParameterName()}" th:value="${_csrf.token}">
                        <input type="hidden" name="owner.id" id="owner.id">
                        <label class="input-label">
                            Название
                            <input required type="text" class="text-input" name="account-name" id="account-name" pattern="[А-Яа-я]+">
                        </label>
                        <label class="input-label">
                            Вид валюты
                            <select required name="currency" id="currency">
                                <option th:each="currencyOpt : ${T(ru.bendricks.piris.model.Currency).values()}" th:value="${currencyOpt}" th:text="${currencyOpt.toString()}"></option>
                            </select>
                        </label>
                    </div>
                </div>
                <button class="send-button" onclick="createNewAccount(event)">Создать</button>
            </form>
        </div>
    </div>
</div>

<div class="modal-container" id="obligation-modal" style="display: none">
    <div class="modal-background-small" id="obligation-modal-bg"></div>
    <div class="modal-window-small">
        <div class="modal-window-header">
            <p>Создать счет</p>
            <svg class="modal-window-header-cross" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000"
                 height="20px" width="20px" version="1.1" id="obligation-modal-header-cross" viewBox="0 0 490 490"
                 xml:space="preserve">
                        <polygon
                                points="456.851,0 245,212.564 33.149,0 0.708,32.337 212.669,245.004 0.708,457.678 33.149,490 245,277.443 456.851,490   489.292,457.678 277.331,245.004 489.292,32.337 "/>
                    </svg>
        </div>
        <div class="modal-window-content" id="obligation-modal-content">
            <form method="post" class="register-modal-form register-fix" id="create-obligation-form">
                <div class="model-rows">
                    <div class="register-form-colomn">
                        <input type="hidden"  th:name="${_csrf.getParameterName()}" th:value="${_csrf.token}">
                        <input type="hidden" name="obligation.owner.id" id="obligation.owner.id">
                        <label class="input-label">
                            Дата начала договора
                            <input required type="date" class="text-input" name="obligation.startTime" id="obligation.startTime">
                        </label>
                        <label class="input-label">
                            Депозитный план
                            <select required name="obligation.obligationPlan.id" id="obligation.obligationPlan.id">
                                <!--/*@thymesVar id="plans" type="java.util.List<ru.bendricks.piris.model.ObligationPlan>"*/-->
                                <option th:each="planOpt : ${plans}" th:value="${planOpt.getId()}" th:text="${planOpt.getName().concat(' ').concat(planOpt.getCurrency().toString()).concat(' ').concat(planOpt.getPlanPercent()).concat('% ').concat(planOpt.months).concat(' месяцев макс.')}"></option>
                            </select>
                        </label>
                        <label class="input-label">
                            Стартовый баланс
                            <input required type="number" class="text-input" name="startBalance" id="startBalance">
                        </label>
                        <label class="input-label">
                            Количество месяцев
                            <input required type="text" class="text-input" name="months" id="months">
                        </label>
                        <label class="input-label">
                            IBAN платёжного счёта
                            <select required name="paymentIban" id="paymentIban">
                            </select>
                        </label>
                    </div>
                </div>
                <button class="send-button" onclick="createNewObligation(event)">Создать</button>
            </form>
        </div>
    </div>
</div>

<div class="navigation-bar">
    <div class="tablinks active" id="tab1" onclick="openTab(event, 'AllUsers')">
        <img src="https://cdn-icons-png.flaticon.com/128/942/942799.png" class="nav-image" width="50%">
        <p class="nav-discription">Все пользователи</p>
    </div>
    <a href="/main" class="navigation-bar-element" >
        <img src="https://cdn-icons-png.flaticon.com/128/263/263115.png" class="nav-image" width="60%">
        <p class="nav-discription">На главную</p>
    </a>
    <form action="/auth/logout" method="post" class="navigation-bar-element">
        <input type="hidden" th:name="${_csrf.getParameterName()}" th:value="${_csrf.token}">
        <input type="submit" value="Выйти">
    </form>
</div>

<div class="main-page">
    <div id="AllUsers" style="display: block;width: 90%;margin: 0 auto;">

    </div>

    <script type="text/javascript" th:src="@{/js/dictionary.js}"></script>
    <script type="text/javascript" th:src="@{/js/common.js}"></script>
    <script type="text/javascript" th:src="@{/js/admin_page.js}"></script>

</div>
</body>
</html>